<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>滑动门</title>
  <style type="text/css">
    .container{
      width: 800px;
      margin: auto;
      position: relative;
      overflow: hidden;
      height: 400px;
    }
    img{
      display: block;
      width: 400px;
      border:1px solid #ccc;
      position: absolute;
      cursor: pointer;
    }
    img:nth-child(2){
      left: 400px;
    }
    img:nth-child(3){
      left: 533px;
    }
    img:nth-child(4){
      left: 666px;
    }

  </style>
</head>
<body>
  <div class="container" id="slide-door">
    <img src="./images/door2.png" alt="">
    <img src="./images/door1.png" alt="">
    <img src="./images/door3.png" alt="">
    <img src="./images/door4.png" alt="">
  </div>
  <script>
    window.addEventListener('load',function(){

      var container = document.getElementById('slide-door'),
        containerWidth = parseInt(getStyle(container,'width')),
        images = container.getElementsByTagName('img'),
        imageCount = images.length,
        imageWidth = parseInt(getStyle(images[0],'width')),
        foldWidth = Math.floor((containerWidth - imageWidth) / (imageCount - 1));
      container.addEventListener('click',function(event){
        var target = event.target,
          left = 0;
        if(target.tagName.toLowerCase() == 'img'){
          for(var i=0;i<imageCount;i++){
            go(images[i],left);
            if(images[i] != target){
              left += foldWidth;
            }else{
              left += imageWidth;
            }
          }
        }
      });
      function go(el,left){
        var originLeft = parseInt(getStyle(el,'left')),
          offset = left - originLeft,
          w = offset / 5,
          i = 0;
        if(offset == 0){
          return;
        }
        setTimeout(function _go(){
          if(i<5){
            i++;
            el.style.left = originLeft + w * i + 'px';
            setTimeout(_go,80); 
          }
        },80);
      }

      function getStyle(el,style){
        return el.currentStyle && el.currentStyle[style] ||  window.getComputedStyle(el,null)[style];
      }
    });  

  </script>
</body>
</html>