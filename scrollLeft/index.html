<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>世界未末日</title>
	<style type="text/css">
		body{	
			background-color: #111;
			color: #fff;
			padding: 0;
			margin: 0px auto;
			font-family: monospace,sans-serif;
			line-height: 1.9em;
			font-family: monospace;
			cursor: pointer;
			overflow-x: hidden;
			overflow-y: hidden;
		}

		a{
			text-decoration: none;
			color: #fff;
		}

		a:hover{
			color: #f33;
		}
		#to-top{
			width: 20px;
			position: fixed;
			background-color: #333;
			right: 0;
			border-radius: 8px 0 0 8px;
			color: #fff;
		}
		#to-top:hover{
			cursor: pointer;
			background-color: #666;
		}
		#to-top p{
			font-size: .8em;
			margin: 1em auto;
			width: 1em;
			line-height: 1.1em;
		}

		#content{
			position: relative;
			margin: 0 auto;
			overflow: hidden;
		}


		#content h1{

			font-size: 2em;
			width: 1em;
			float: right;
			padding:0 3em 0 1em;
			font-weight: normal;
			margin-top: 0;

		}
		#content p{
			margin-top: 0px;
			margin-bottom: 0px;
			width: 1em;
			float: right;
			padding-left: 1.7em;
			word-break: normal;
			word-wrap: break-word;
		}
		#content time{
			line-height: 1em;
			float: right;
			width: 1em;
			word-wrap: break-word;
			padding-left: 4em;
		}
		
		#content img{
			float: right;
			height: 100%;
			width: 100%;
		}
		#content:last-child{
			position: absolute;
		}
		p.separate{
			width: 1px !important;
			color: #333;
			padding-left: 2.5em !important;
			margin-right: 0.8em !important;
			height: 100px;
			
			margin-top: 0.5em !important;
		}
		p.end{
			position: absolute;
			z-index: 102;
			line-height: 1.2em;
		}

		p.end:hover{
			color: #f33;
		}
		#mask{
			position: fixed;
			background-color: #000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			z-index: 100;
			opacity: 0;
		}
		nav{
			position: fixed;
			color: #fff;
			z-index: 101;
			left: 45%;
			bottom: 3%;

		}
		
		nav#nav p{
			display: inline;
			padding-right: 2em;
		} 
		

		#comment{
			overflow-x: hidden;
			overflow-y: scroll;
			--ms-overflow-y: scroll;
			padding: 50px;
			border-radius: 5px;
		}

		p#addcomment:hover{
			color:#f33;
		}

		.hide{
			display: none;
		}
		.pop{
			z-index: 102;
			position: fixed;
			background-color: #fff;
			left: 0px;
			top:0px;
			display: block;
		}
	</style>
</head>
<body>

	<div id="content">
		<h1>世界未末日</h1>
		<time>2015 - 06 - 01</time>
		
		<p><img src="http://wy-ei.com/images/bg/jay.jpg" /></p>		

		<p>在一个阳光明媚的清晨，风儿轻轻地吹着，一切都显得那么的美好。我走在城市江边的路上，心情愉悦。这个时候，我听见阵阵轰鸣声，抬头看见天上飞着几架飞机，但是它们都飞的很低，越来越低越来越低，终于坠落在了江中。之前曾梦见飞机落在自家的院子里，这次是真正的见到飞机坠落了，心情有点激动同时也很为之伤悲.</p>
	
		<p>这是很多人涌向江边来看发生了什么，江中飞机坠落的地方冒着气泡，很快就是一阵爆炸声。我快步离开人满为患的江边。抬头看家太阳被不知哪里飘来的乌云遮住了一部风，天也暗了下来。这个时候天空中出现了更多的飞行物，不止是飞机还有巨型货轮，这些东西不知从何而来，在天上缓缓地移动着。我赶快掏出手机拍下了这一亘古未见的情景，当我仰头拍摄的时候我注意到乌云已经笼罩了整个太阳，只有几束阳光从黑漆漆的云层中透射出来，而此刻仿佛已经是傍晚。</p>


		<p>之后我又看到了一些我从来没有在任何地方见过的飞行器，它们体型巨大，移动起来却也很迅速。我带着疑惑继续拍摄。这个时候，我看到了天空中缓缓移动的矩形货轮慢慢下落，在加速度的作用下速度越来越快，而人群中也爆发出阵阵尖叫。下落的货轮重重地砸在了大桥上面，桥面断成两截，货轮的尾巴竖立在江中。接下来就是阵阵爆炸，以及更加沸腾的尖叫。</p>

		<p>我放下手机，周围一片昏暗，狂风大作。我擦擦双眼，天上更多飞行物正在慢慢飞向这座城市。这时巨型集装箱、大小型货轮、大卡车等像下雨一般落下，人们哭泣着、奔跑着，警笛蜂鸣着，接着便是更巨大的爆炸，大楼倒塌。五分钟前生机勃勃的城市成为人间地狱。我一边留神着天空，一边看着身边。人们慌忙地从汽车中出来跑到了附近的大楼里；在不远处一个巨大的集装箱横在十字路口中间，几辆小汽车被压成了铁饼；一群逃命的人躲避不急被一辆飞驰的汽车结果了生命。看着空中发车沉闷轰鸣声的奇怪飞船，我不敢相信有外星人袭击了地球。</p>

		<p>我渐渐紧张了、害怕了，那种来此内心深深的恐惧让我瘫倒在地。周围爆炸继续着，人群哭泣着，狂风吹起阵阵焦烟弥漫在城市上空。我起身沿着公路继续走着，视线渐渐模糊起来。</p>

		<p>这个时候，我想到了周杰伦的《世界未末日》，人们面对世界末日时的反应。社会青年混混回到家中，吃下了母亲亲手做的面条；舞蹈、音乐爱好者尽情地享受最后的表演时刻；孩子下定决心去寻找自己喜欢的女孩儿......如今真正的末日来临，我拿出手机想最后问候一下我的父母、我的朋友以及一个我至今不能忘怀的旧友。但我隐约看见无服务几个字。</p>

		<p>我绝望地躺在路边草地上，此刻仿佛一切都宁静了，听不见了爆炸声也没了尖叫声，只有加快的心跳声和呼吸声。回忆起发生在过去几年的事情，我掏出手机翻看过往的相册，一张又一张地看着。有的令我微笑，有的另外伤心，而还有一些令我百感交集。不知看了多久，我似乎在这生命的最后时刻明白了什么，原来我的经历过这么多有趣的事情，遇到过这么多热心人，结实了这么多好朋友。不知道此刻我的好朋友们怎么样了，我内心真诚地感谢他们陪我走过一段段历程。我也祝福他们在世界末日来临之前做完自己最想做的事情。</p>

		<p>躺在这草地上，我略有伤感。因为我不知道我该干什么，在这个陌生的城市，甚至不知到该向哪个方向走。于是我不走了，躺在草地上好好休息一下吧。</p>

		<p>躺下后我做了一个梦。我走在小溪边，柳条轻飘，溪水荡漾。四周都很安静，只有小鸟叽喳的叫声。我慢慢地向前走着，似乎在寻找着什么。不知走了多久我醒了过来，揉揉眼睛慢慢睁开眼睛，这个时候一个巨大的黑乎乎的东西从天而降距我越来越近。还没来得及发出惨叫，一个抽搐，我回到了现实。</p>

		<p>看在窗前，窗外树叶在风中婆娑，朝阳刚升起，远处操场里有人在做着运动，足球场上有个人躺在草地上，大概也在做着美好的梦吧。当世界末日来临，无论是自然灾害或是外星生物入侵，人类都显得是那样的渺小。当面对生离死别，面对生命中的最后几个小时的时候，才发现过去的一些事情是多么的美好，以及发现过去又有多少东西自己没有珍惜。因为自己的懒惰，不勇敢错过了多少机会，伤害了多少人。如今并不是世界末日，但是不要等到世界末日才后悔莫及。</p>

		<p>最后，引用《世界未末日》MV里面的一句话：不到等到世界末日才想珍惜一切。</p>

	</div>
	<section id="comment" class="hide">
	    <script type="text/javascript">
		var duoshuoQuery = {short_name:"wy-ei"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>

	    <div id="disqus_container">
	        <div class="ds-thread" data-thread-key={{ page.id }} data-title={{ page.title }} data-url="wy-ei.com/{{ page.url }}"></div>        
	    </div>
	</section>
	<nav id="nav">
		<p><a href="#">主页</a></p>
		<p id="addcomment">评论</p>
	</nav>

	<script type="text/javascript">
		var poem = function(){
			var cols = 0;
			var content = document.getElementById("content");
			var ps = content.getElementsByTagName("p");
			var height = getViewHeight();
			var width = getViewWidth();
			var lineHeight = getLineHeight(ps[0]);
			function getViewWidth(){
				return (document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth);
			}
			function getViewHeight(){
				return (document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight);
			}

			function getLineHeight(pNode){
				var lineHeight = parseInt(pNode.style.lineHeight,10);
				if(isNaN(lineHeight)){
					var clone = pNode.cloneNode();
					var singleLineHeight,doubleLineHeight;
					var br = document.createElement("br");
					pNode.appendChild(clone);
					clone.appendChild(br);
					singleLineHeight  = clone.offsetHeight;
					clone.appendChild(br.cloneNode(true));
					doubleLineHeight = clone.offsetHeight;
					lineHeight = doubleLineHeight - singleLineHeight;
					pNode.removeChild(clone);
				}
				return lineHeight;
			}



			function getText(element){
				for(var i=0,len = element.childNodes.length;i<len;i++){
					if(element.childNodes[i].nodeType == 3){
						element.childNodes[i].normalize();
						return element.childNodes[i].nodeValue;
					}
				}
				return "";
			}

			function getColsArray(text){
				var array=[];
				var n = Math.floor((height*0.7)/lineHeight);
				console.log("n:"+n);
				text = "　　"+text;
				for(var i=0,len=text.length;i<len;){
					array.push(text.slice(i,Math.min(i+=n,len)));
				}
				return array;
			}

			function addCols(arr,dest){
				for(var i=0,len=arr.length;i<len;i++){
					var p = document.createElement("p");
					var text = document.createTextNode(arr[i]);
					p.appendChild(text);
					dest.appendChild(p);
					cols+=2.7;
				}
			}

			function addSeparateLine(parentNode){
				var p = document.createElement("p");
				p.setAttribute("class", "separate");
				p.style.height = 0.67 * height + "px";
				parentNode.appendChild(p);
				cols+=3.3;

			}


			function processImg(){
				var content = document.getElementById("content");
				var imgs = content.getElementsByTagName("img");
				var imgHeight = 0.67 * height;
				var imgWidth = imgHeight * 16 / 9; 
				for(var i=0,len = imgs.length;i<len;i++){
					imgs[i].parentNode.style.height = imgHeight + "px";
					imgs[i].parentNode.style.width = imgWidth + "px";
					cols += imgWidth/13;
				}
			}

			function convert(){
				var content = document.getElementById("content");
				var ps = content.getElementsByTagName("p");

				var text;
				var textArr;
				for(var i=0,len = ps.length;i<len;i++){
					text = getText(ps[i]);
					if(!text){
						content.appendChild(ps[i].cloneNode(true));

					}else{
						textArr =getColsArray(text);
						addCols(textArr,content);
					}
					addSeparateLine(content);
					ps[i].style.display = 'none';
				}
				var p = document.createElement("p");
				p.setAttribute("class", "end");
				var textNode = document.createTextNode("完-回到开头");
				p.style.marginTop = height*0.3+"px";
				p.style.marginLeft = "70px";
				p.appendChild(textNode);

				p.addEventListener("click",function(){
					scrollLeftN(10000);
				});

				content.appendChild(p); 
			}

			function setStyle(){
				content.style.marginTop = height*0.15+"px";
				content.style.width  = cols +29 +"em";
			}

			processImg();
			convert();
			setStyle();

			var ismousedoen = false;

			function addMask(){
				var mask = document.createElement("div");
				mask.setAttribute("id", "mask");
				document.body.appendChild(mask);
			}

			addMask();

			mask.addEventListener("mousedown", function(event){
				console.log(event.pageX);
				ismousedoen = true;
				oldx = event.pageX;
			});
			mask.addEventListener("mouseup", function(){
				ismousedoen = false;
			});

			function scrollLeftN(n){
				if(document.documentElement){
					document.documentElement.scrollLeft += n;
				}
				document.body.scrollLeft+=n;
			}

			mask.addEventListener("mousemove", function(event){
				if(ismousedoen == true){
					newx = event.pageX||event.clientX;
					if(newx>oldx){
						scrollLeftN(-Math.abs(oldx-newx));
						
					}
					if(newx<oldx){
						scrollLeftN(Math.abs(oldx-newx));
					}
				}
			});

			var ispopup  = false;
			mask.addEventListener("click", function(event){
				if(ispopup==true){
					var commentDiv = document.getElementById("comment");
					commentDiv.setAttribute("class","hide");
					event.target.style.opacity = 0;
					ispopup = false;
				}
			})
			scrollLeftN(10000);

			function popComment(){
				var commentDiv = document.getElementById("comment");
				commentDiv.setAttribute("class", "pop");
				commentDiv.style.width = 0.7 * width  + "px";
				commentDiv.style.left = 0.15 * width + "px";
				commentDiv.style.maxHeight = 0.7 * height + "px";
				commentDiv.style.top = 0.15 * height + "px";
				var mask = document.getElementById("mask");
				mask.style.opacity = 0.7;
				ispopup = true;

			}

			var com = document.getElementById("addcomment");
			com.addEventListener("click", popComment);






		}
		window.addEventListener("load",poem);
		

		


	</script>
</body>
</html>
